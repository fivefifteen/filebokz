/*!
  filebokz v0.0.2 (https://github.com/kodie/filebokz)
  by Kodie Grantham (https://kodieg.com)
*/
var filebokz=function(e,i){e=e||".filebokz","string"!=typeof i&&(i="filebokz");var h=["apng","bmp","gif","x-icon","jpeg","png","svg+xml","tiff","webp"],r=["kB","MB","GB","TB","PB","EB","ZB","YB"],t=document.createElement("div"),y="draggable"in t||"ondragstart"in t&&"ondrop"in t,s="FormData"in window&&"FileReader"in window;filebokz.count||(filebokz.count=0),"string"==typeof e?e=document.querySelectorAll(e):e instanceof HTMLElement&&(e=[e]);function E(e,t,i,r){return e.hasOwnProperty(t+r)?e[t+r]:e.hasOwnProperty(t+i)?e[t+i]:void 0}function w(e){if(Math.abs(e)<1024)return e+" B";for(var t=-1;e/=1024,++t,1024<=Math.round(10*Math.abs(e))/10&&t<r.length-1;);return+e.toFixed(1)+" "+r[t]}function o(e,l,f){var t=f.files,i=f.originalFiles||[],r="remove"===e.filebokzAction;if(t.length){var a=!l.dataset.appendable||"false"!==l.dataset.appendable.toLowerCase(),e=f.hasAttribute("multiple")&&"false"!==f.getAttribute("multiple").toLowerCase();if(a&&e&&!r&&i.length){for(var n=Array.from(t),s=Array.from(i),o=0;o<n.length;o++){for(var d=!1,c=0;c<s.length;c++)n[o].lastModifed===s[c].lastModifed&&n[o].name===s[c].name&&n[o].size===s[c].size&&n[o].type===s[c].type&&(d=!0);d||s.push(n[o])}f.files=filebokz.newFileList(s),t=f.files}k(t,l,f)?l.classList.add("has-files"):t=[]}t.length||r||(f.files=filebokz.newFileList(i),t=f.files),t.length||l.classList.remove("has-files"),f.originalFiles=t,l.dataset.fileCount=t.length,(r=l.querySelector(".file-count"))&&(r.innerHTML=t.length);for(var g=0,u=0;u<t.length;u++)g+=t[u].size;l.dataset.size=g,(r=l.querySelector(".size"))&&(r.innerHTML=w(g));var v=l.querySelector(".files");if(v){var m=v.dataset,p=v.querySelectorAll(".file");if(p)for(var b=0;b<p.length;b++)v.removeChild(p[b]);if(t.length)for(var L=!m.draggable||"false"!==m.draggable.toLowerCase(),z=0;z<t.length;z++)!function(e,r){var t=e.type.split("/")[0],i=e.type.replace(/[/+-](\w{1})/g,function(e){return e.toUpperCase()}).replace(/[/+-]/g,""),t=t.charAt(0).toUpperCase()+t.slice(1),a=(a=E(m,"element",t,i))||m.element||"span",n=(n=E(m,"content",t,i))||m.content||"{name}",s=(s=E(m,"contentBefore",t,i))||m.contentBefore||"",o=(o=E(m,"contentAfter",t,i))||m.contentAfter||"",i=(i=E(m,"url",t,i))||(h.includes(e.type.replace("image/",""))?window.URL.createObjectURL(e):m.url||"");n=(n=(n=(n=(n=s+n+o).replace(/{name}/gi,e.name)).replace(/{type}/gi,e.type)).replace(/{size}/gi,w(e.size))).replace(/{url}/gi,i);a=document.createElement(a);a.className="file",a.innerHTML=n,y&&L&&(a.draggable="true",a.addEventListener("drag",function(e){!function(e,t){e.preventDefault(),e.stopPropagation();var i=document.elementFromPoint(e.pageX,e.pageY);if(i){var r=document.getElementById(t);var a=i.closest("[filebokz-id]");if(a&&a.classList.contains("js-enabled")){if(a.id!==t){e.target.classList.add("is-transferring");r.classList.add("is-transferring")}e.target.classList.remove("is-removing");r.classList.remove("is-removing")}else{e.target.classList.add("is-removing");r.classList.add("is-removing");e.target.classList.remove("is-transferring");r.classList.remove("is-transferring")}}}(e,l.id)},!1),a.addEventListener("dragstart",function(e){!function(e,t){e.target.classList.add("is-dragging");var i=Array.from(e.target.parentNode.children).indexOf(e.target);e.dataTransfer.setData("fileBoxId",t),e.dataTransfer.setData("fileIndex",i)}(e,l.id)},!1));n=a.querySelector(".remove");n&&n.addEventListener("click",function(e){var t,i;t=f,i=r,(e=e).preventDefault(),e.stopPropagation(),filebokz.removeFiles(t,i)},!1),v.append(a)}(t[z],z)}t.length>i.length?filebokz.triggerEvent("file-added",l):t.length<i.length&&filebokz.triggerEvent("file-removed",l)}function l(e,t,i){e.preventDefault(),e.stopPropagation(),t.classList.add("is-dragging")}function k(e,t,i){var r=t.dataset,i=i.hasAttribute("multiple")&&"false"!==i.getAttribute("multiple").toLowerCase()?r.hasOwnProperty("maxFiles")?r.maxFiles:null:1,a=r.maxFileSize,n=r.maxSize,s=r.allowedExtensions?r.allowedExtensions.split(","):null,o=0;if(i&&e.length>i)return d(t,"maxFiles",i),0;for(var l=0;l<e.length;l++){var f=(f=e[l].name.split("."))?f.pop().toLowerCase():"[none]";if(o+=e[l].size,a&&e[l].size>a)return d(t,"maxFileSize",a),0;if(n&&n<o)return d(t,"maxSize",n),0;if(s&&!s.includes(f))return d(t,"allowedExtensions",s.join(", ")),0}return 1}for(var d=function(e,t,i){var r=e.querySelector(".error-msg"),a=e.dataset.errorDisplayDuration||3e3;e.classList.add("error");var n=e.dataset,s="";"maxFiles"===t&&(s=(s=(s=n.maxFilesErrorMsg||"A maximum of {variable} file{s} can be uploaded.").replace(/{variable}/gi,i)).replace(/{s}/gi,1<i?"s":"")),"maxFileSize"===t&&(s=(s=n.maxFileSizeErrorMsg||"File size cannot exceed {variable}.").replace(/{variable}/gi,w(i))),"maxSize"===t&&(s=(s=n.maxSizeErrorMsg||"Total combined file size cannot exceed {variable}.").replace(/{variable}/gi,w(i))),"allowedExtensions"===t&&(s=(s=n.allowedExtensionsErrorMsg||"Only the following file types are allowed: {variable}.").replace(/{variable}/gi,i)),r&&(r.innerHTML=s,i=250,e.dataset.hasOwnProperty("errorAnimationDuration")&&(i=e.dataset.errorAnimationDuration),setTimeout(function(){r.innerHTML=""},a+i)),setTimeout(function(){e.classList.remove("error")},a),filebokz.triggerEvent("error",e,{errorMessage:s,errorType:t})},a=0;a<e.length;a++)!function(a){var t=a.closest("form"),n=a.querySelector('input[type="file"]');!n||a.classList.contains("no-js")||a.dataset.hasOwnProperty("filebokzId")||(filebokz.count++,a.dataset.filebokzId=filebokz.count,a.classList.add("js-enabled"),i&&!a.classList.contains(i)&&a.classList.add(i),s&&a.classList.add("is-advanced"),y&&a.classList.add("is-draggable"),a.id||(a.id="filebokz-"+filebokz.count),a.addEventListener("dragover",function(e){l(e,a)},!1),a.addEventListener("dragenter",function(e){l(e,a)},!1),a.addEventListener("dragleave",function(e){var t;t=a,(e=e).preventDefault(),e.stopPropagation(),t.classList.remove("is-dragging")},!1),a.addEventListener("drop",function(e){!function(e,t,i){e.preventDefault(),e.stopPropagation(),t.classList.remove("is-dragging");var r=e.dataTransfer.files,a=e.dataTransfer.getData("fileBoxId");if(a){var n=e.dataTransfer.getData("fileIndex"),s=document.getElementById(a),o=s.querySelector("input"),e=s.querySelector(".files").children[n];if(s.classList.remove("is-dragging"),s.classList.remove("is-removing"),s.classList.remove("is-transferring"),e.classList.remove("is-dragging"),e.classList.remove("is-removing"),e.classList.remove("is-transferring"),a===t.id)return;s=Array.from(o.files),e=s[n],a=Array.from(i.files);i.hasAttribute("multiple")&&"false"!==i.getAttribute("multiple").toLowerCase()?a.push(e):a=[e],k(a,t,i)&&(r=filebokz.newFileList(a),s.splice(n,1),o.files=filebokz.newFileList(s),filebokz.triggerEvent("change",o,{filebokzAction:"remove"}))}r&&r.length&&(i.files=r,filebokz.triggerEvent("change",i))}(e,a,n)},!1),n.addEventListener("change",function(e){o(e,a,n)},!1),n.addEventListener("focus",function(e){a.classList.add("in-focus")},!1),n.addEventListener("blur",function(e){a.classList.remove("in-focus")},!1),t&&(a.dataset.autoSubmit&&"false"!==a.dataset.autoSubmit.toLowerCase()&&n.addEventListener("change",function(e){t.submit()},!1),t.addEventListener("reset",function(e){var t,i,r;i=n,(r=(t=a).querySelector(".error"))&&(r.innerHTML=""),t.classList.remove("error"),filebokz.triggerEvent("change",i)},!1),t.addEventListener("submit",function(e){a.classList.add("is-uploading")},!1)),o(new Event("change"),a,n))}(e[a]);return window.addEventListener("dragover",function(e){e.preventDefault()},!1),window.addEventListener("drop",function(e){!function(e){e.preventDefault(),e.stopImmediatePropagation();var t=e.dataTransfer.getData("fileBoxId");t&&(t=document.getElementById(t).querySelector("input"),e=e.dataTransfer.getData("fileIndex"),filebokz.removeFiles(t,e))}(e)},!1),e};filebokz.addFiles=function(e,t){var i=Array.from(e.files);i.concat(Array.from(t)),e.files=filebokz.newFileList(i),filebokz.triggerEvent("change",e)},filebokz.newFileList=function(e){var t;try{t=new DataTransfer}catch(e){t=new ClipboardEvent("")}for(var i=0;i<e.length;i++)t.items.add(e[i]);return t.files},filebokz.removeFiles=function(e,t,i){var r=Array.from(e.files);r.splice(t||0,i||1),e.files=filebokz.newFileList(r),filebokz.triggerEvent("change",e,{filebokzAction:"remove"})},filebokz.triggerEvent=function(i,r,a,e){return setTimeout(function(){var e,t=new Event(i);for(e in a)a.hasOwnProperty(e)&&(t[e]=a[e]);r.dispatchEvent(t)},e||1)};
//# sourceMappingURL=filebokz.min.js.map